!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(e,t){e.exports=THREE},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function u(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,u)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:n(0),throw:n(1),return:n(2)}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(14),s=n(0),d=new vox.Parser,c=function(e){function t(t){var n=e.call(this)||this;n.data=t;return n.animations={},Object.keys(n.data.animation).forEach(function(e){var o=n.data.animation[e];n.animations[e]=r({},o,{vox:o.vox.map(function(e){return d.parse(u.join("./vox",e)).then(function(e){return new vox.MeshBuilder(e,{voxelSize:t.size}).createMesh()})})})}),n.voxHolder=new s.Object3D,t.position&&n.voxHolder.position.fromArray(t.position),t.rotation&&n.voxHolder.rotation.fromArray(t.rotation.map(function(e){return e*Math.PI/180})),n.add(n.voxHolder),n.play(n.data.default),n}return o(t,e),t.prototype.play=function(e){this.timeout&&clearInterval(this.timeout),this.current=e,this.frame=0,this.timeout=setInterval(this.step.bind(this),this.animations[e].speed)},t.prototype.stop=function(){clearTimeout(this.timeout)},t.prototype.step=function(){return i(this,void 0,void 0,function(){var e,t;return a(this,function(n){switch(n.label){case 0:return this.voxHolder.children[0]&&this.voxHolder.remove(this.voxHolder.children[0]),e=this.animations[this.current].vox,[4,e[this.frame]];case 1:return t=n.sent(),this.voxHolder.add(t),this.frame=this.frame+1===e.length?this.frame=0:this.frame+1,[2]}})})},t}(s.Object3D);t.default=c},function(e,t,n){(function(n){var o,r;/*!
 *  howler.js v2.0.3
 *  howlerjs.com
 *
 *  (c) 2013-2017, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var e=this||a;return e._counter=0,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var t=this||a;if(e=parseFloat(e),t.ctx||f(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&(t.masterGain.gain.value=e);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),r=0;r<o.length;r++){var i=t._howls[n]._soundById(o[r]);i&&i._node&&(i._node.volume=i._volume*e)}return t}return t._volume},mute:function(e){var t=this||a;t.ctx||f(),t._muted=e,t.usingWebAudio&&(t.masterGain.gain.value=e?0:t._volume);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),r=0;r<o.length;r++){var i=t._howls[n]._soundById(o[r]);i&&i._node&&(i._node.muted=!!e||i._muted)}return t},unload:function(){for(var e=this||a,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,f()),e},codecs:function(e){return(this||a)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||a;if(e.state=e.ctx?e.ctx.state||"running":"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{var t=new Audio;void 0===t.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{var t=new Audio;t.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||a,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),o=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),r=o&&parseInt(o[0].split("/")[1],10)<33;return e._codecs={mp3:!(r||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||a,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),n=!!("ontouchend"in window||e._navigator&&e._navigator.maxTouchPoints>0||e._navigator&&e._navigator.msMaxTouchPoints>0);if(!e._mobileEnabled&&e.ctx&&(t||n)){e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var o=function(){var t=e.ctx.createBufferSource();t.buffer=e._scratchBuffer,t.connect(e.ctx.destination),void 0===t.start?t.noteOn(0):t.start(0),t.onended=function(){t.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener("touchend",o,!0)}};return document.addEventListener("touchend",o,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&a.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&a.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.state="resuming",e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var a=new i,u=function(e){var t=this;if(!e.src||0===e.src.length)return void console.error("An array of source files must be passed with any new Howl.");t.init(e)};u.prototype={init:function(e){var t=this;return a.ctx||f(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onresume=[],t._webAudio=a.usingWebAudio&&!t._html5,void 0!==a.ctx&&a.ctx&&a.mobileAutoEnable&&a._enableMobileAudio(),a._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=this,t=null;if(a.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var o,r;if(e._format&&e._format[n])o=e._format[n];else{if("string"!=typeof(r=e._src[n])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}o=/^data:audio\/([^;,]+);/i.exec(r),o||(o=/\.([^.]+)$/.exec(r.split("?",1)[0])),o&&(o=o[1].toLowerCase())}if(o||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),o&&a.codecs(o)){t=e._src[n];break}}return t?(e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new s(e),e._webAudio&&c(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,t){var n=this,o=null;if("number"==typeof e)o=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e){e="__default";for(var r=0,i=0;i<n._sounds.length;i++)n._sounds[i]._paused&&!n._sounds[i]._ended&&(r++,o=n._sounds[i]._id);1===r?e=null:o=null}}var u=o?n._soundById(o):n._inactiveSound();if(!u)return null;if(o&&!e&&(e=u._sprite||"__default"),"loaded"!==n._state&&!n._sprite[e])return n._queue.push({event:"play",action:function(){n.play(n._soundById(u._id)?u._id:void 0)}}),u._id;if(o&&!u._paused)return t||setTimeout(function(){n._emit("play",u._id)},0),u._id;n._webAudio&&a._autoResume();var s=Math.max(0,u._seek>0?u._seek:n._sprite[e][0]/1e3),d=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-s),c=1e3*d/Math.abs(u._rate);u._paused=!1,u._ended=!1,u._sprite=e,u._seek=s,u._start=n._sprite[e][0]/1e3,u._stop=(n._sprite[e][0]+n._sprite[e][1])/1e3,u._loop=!(!u._loop&&!n._sprite[e][2]);var l=u._node;if(n._webAudio){var _=function(){n._refreshBuffer(u);var e=u._muted||n._muted?0:u._volume;l.gain.setValueAtTime(e,a.ctx.currentTime),u._playStart=a.ctx.currentTime,void 0===l.bufferSource.start?u._loop?l.bufferSource.noteGrainOn(0,s,86400):l.bufferSource.noteGrainOn(0,s,d):u._loop?l.bufferSource.start(0,s,86400):l.bufferSource.start(0,s,d),c!==1/0&&(n._endTimers[u._id]=setTimeout(n._ended.bind(n,u),c)),t||setTimeout(function(){n._emit("play",u._id)},0)},p="running"===a.state;if("loaded"===n._state&&p)_();else{var f=p||"loaded"!==n._state?"load":"resume";n.once(f,_,p?u._id:null),n._clearTimer(u._id)}}else{var h=function(){l.currentTime=s,l.muted=u._muted||n._muted||a._muted||l.muted,l.volume=u._volume*a.volume(),l.playbackRate=u._rate,l.play(),c!==1/0&&(n._endTimers[u._id]=setTimeout(n._ended.bind(n,u),c)),t||n._emit("play",u._id)},v="loaded"===n._state&&(window&&window.ejecta||!l.readyState&&a._navigator.isCocoonJS);if(4===l.readyState||v)h();else{var m=function(){h(),l.removeEventListener(a._canPlayEvent,m,!1)};l.addEventListener(a._canPlayEvent,m,!1),n._clearTimer(u._id)}}return u._id},pause:function(e){var t=this;if("loaded"!==t._state)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),o=0;o<n.length;o++){t._clearTimer(n[o]);var r=t._soundById(n[o]);if(r&&!r._paused&&(r._seek=t.seek(n[o]),r._rateSeek=0,r._paused=!0,t._stopFade(n[o]),r._node))if(t._webAudio){if(!r._node.bufferSource)return t;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var o=n._getSoundIds(e),r=0;r<o.length;r++){n._clearTimer(o[r]);var i=n._soundById(o[r]);if(i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(o[r]),i._node))if(n._webAudio){if(!i._node.bufferSource)return t||n._emit("stop",i._id),n;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause());i&&!t&&n._emit("stop",i._id)}return n},mute:function(e,t){var n=this;if("loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var o=n._getSoundIds(t),r=0;r<o.length;r++){var i=n._soundById(o[r]);i&&(i._muted=e,n._webAudio&&i._node?i._node.gain.setValueAtTime(e?0:i._volume,a.ctx.currentTime):i._node&&(i._node.muted=!!a._muted||e),n._emit("mute",i._id))}return n},volume:function(){var e,t,n=this,o=arguments;if(0===o.length)return n._volume;if(1===o.length||2===o.length&&void 0===o[1]){n._getSoundIds().indexOf(o[0])>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else o.length>=2&&(e=parseFloat(o[0]),t=parseInt(o[1],10));var r;if(!(void 0!==e&&e>=0&&e<=1))return r=t?n._soundById(t):n._sounds[0],r?r._volume:0;if("loaded"!==n._state)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,o)}}),n;void 0===t&&(n._volume=e),t=n._getSoundIds(t);for(var i=0;i<t.length;i++)(r=n._soundById(t[i]))&&(r._volume=e,o[2]||n._stopFade(t[i]),n._webAudio&&r._node&&!r._muted?r._node.gain.setValueAtTime(e,a.ctx.currentTime):r._node&&!r._muted&&(r._node.volume=e*a.volume()),n._emit("volume",r._id));return n},fade:function(e,t,n,o){var r=this,i=Math.abs(e-t),u=e>t?"out":"in",s=i/.01,d=s>0?n/s:n;if(d<4&&(s=Math.ceil(s/(4/d)),d=4),"loaded"!==r._state)return r._queue.push({event:"fade",action:function(){r.fade(e,t,n,o)}}),r;r.volume(e,o);for(var c=r._getSoundIds(o),l=0;l<c.length;l++){var _=r._soundById(c[l]);if(_){if(o||r._stopFade(c[l]),r._webAudio&&!_._muted){var p=a.ctx.currentTime,f=p+n/1e3;_._volume=e,_._node.gain.setValueAtTime(e,p),_._node.gain.linearRampToValueAtTime(t,f)}var h=e;_._interval=setInterval(function(n,i){s>0&&(h+="in"===u?.01:-.01),h=Math.max(0,h),h=Math.min(1,h),h=Math.round(100*h)/100,r._webAudio?(void 0===o&&(r._volume=h),i._volume=h):r.volume(h,n,!0),(t<e&&h<=t||t>e&&h>=t)&&(clearInterval(i._interval),i._interval=null,r.volume(t,n),r._emit("fade",n))}.bind(r,c[l],_),d)}}return r},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(a.ctx.currentTime),clearInterval(n._interval),n._interval=null,t._emit("fade",e)),t},loop:function(){var e,t,n,o=this,r=arguments;if(0===r.length)return o._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=o._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],o._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var i=o._getSoundIds(t),a=0;a<i.length;a++)(n=o._soundById(i[a]))&&(n._loop=e,o._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return o},rate:function(){var e,t,n=this,o=arguments;if(0===o.length)t=n._sounds[0]._id;else if(1===o.length){var r=n._getSoundIds(),i=r.indexOf(o[0]);i>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));var u;if("number"!=typeof e)return u=n._soundById(t),u?u._rate:n._rate;if("loaded"!==n._state)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,o)}}),n;void 0===t&&(n._rate=e),t=n._getSoundIds(t);for(var s=0;s<t.length;s++)if(u=n._soundById(t[s])){u._rateSeek=n.seek(t[s]),u._playStart=n._webAudio?a.ctx.currentTime:u._playStart,u._rate=e,n._webAudio&&u._node&&u._node.bufferSource?u._node.bufferSource.playbackRate.value=e:u._node&&(u._node.playbackRate=e);var d=n.seek(t[s]),c=(n._sprite[u._sprite][0]+n._sprite[u._sprite][1])/1e3-d,l=1e3*c/Math.abs(u._rate);!n._endTimers[t[s]]&&u._paused||(n._clearTimer(t[s]),n._endTimers[t[s]]=setTimeout(n._ended.bind(n,u),l)),n._emit("rate",u._id)}return n},seek:function(){var e,t,n=this,o=arguments;if(0===o.length)t=n._sounds[0]._id;else if(1===o.length){var r=n._getSoundIds(),i=r.indexOf(o[0]);i>=0?t=parseInt(o[0],10):(t=n._sounds[0]._id,e=parseFloat(o[0]))}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if(void 0===t)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,o)}}),n;var u=n._soundById(t);if(u){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var s=n.playing(t)?a.ctx.currentTime-u._playStart:0,d=u._rateSeek?u._rateSeek-u._seek:0;return u._seek+(d+s*Math.abs(u._rate))}return u._node.currentTime}var c=n.playing(t);c&&n.pause(t,!0),u._seek=e,u._ended=!1,n._clearTimer(t),c&&n.play(t,!0),!n._webAudio&&u._node&&(u._node.currentTime=e),n._emit("seek",t)}return n},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var o=0;o<t._sounds.length;o++)if(!t._sounds[o]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,o=t._soundById(e);return o&&(n=t._sprite[o._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++){t[n]._paused||e.stop(t[n]._id),e._webAudio||(t[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(a._canPlayEvent,t[n]._loadFn,!1)),delete t[n]._node,e._clearTimer(t[n]._id);var o=a._howls.indexOf(e);o>=0&&a._howls.splice(o,1)}var r=!0;for(n=0;n<a._howls.length;n++)if(a._howls[n]._src===e._src){r=!1;break}return d&&r&&delete d[e._src],a.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,o){var r=this,i=r["_on"+e];return"function"==typeof t&&i.push(o?{id:n,fn:t,once:o}:{id:n,fn:t}),r},off:function(e,t,n){var o=this,r=o["_on"+e],i=0;if(t){for(i=0;i<r.length;i++)if(t===r[i].fn&&n===r[i].id){r.splice(i,1);break}}else if(e)o["_on"+e]=[];else{var a=Object.keys(o);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(o[a[i]])&&(o[a[i]]=[])}return o},once:function(e,t,n){var o=this;return o.on(e,t,n,1),o},_emit:function(e,t,n){for(var o=this,r=o["_on"+e],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(o,r[i].fn),0),r[i].once&&o.off(e,r[i].fn,r[i].id));return o},_loadQueue:function(){var e=this;if(e._queue.length>0){var t=e._queue[0];e.once(t.event,function(){e._queue.shift(),e._loadQueue()}),t.action()}return e},_ended:function(e){var t=this,n=e._sprite,o=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&o&&t.stop(e._id,!0).play(e._id),t._webAudio&&o){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=a.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),r)}return t._webAudio&&!o&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),a._autoSuspend()),t._webAudio||o||t.stop(e._id),t},_clearTimer:function(e){var t=this;return t._endTimers[e]&&(clearTimeout(t._endTimers[e]),delete t._endTimers[e]),t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new s(e)},_drain:function(){var e=this,t=e._pool,n=0,o=0;if(!(e._sounds.length<t)){for(o=0;o<e._sounds.length;o++)e._sounds[o]._ended&&n++;for(o=e._sounds.length-1;o>=0;o--){if(n<=t)return;e._sounds[o]._ended&&(e._webAudio&&e._sounds[o]._node&&e._sounds[o]._node.disconnect(0),e._sounds.splice(o,1),n--)}}},_getSoundIds:function(e){var t=this;if(void 0===e){for(var n=[],o=0;o<t._sounds.length;o++)n.push(t._sounds[o]._id);return n}return[e]},_refreshBuffer:function(e){var t=this;return e._node.bufferSource=a.ctx.createBufferSource(),e._node.bufferSource.buffer=d[t._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=e._rate,t},_cleanBuffer:function(e){var t=this;if(t._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=t._scratchBuffer}catch(e){}}return e.bufferSource=null,t}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++a._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=a._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),e._node.gain.setValueAtTime(n,a.ctx.currentTime),e._node.paused=!0,e._node.connect(a.masterGain)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(a._canPlayEvent,e._loadFn,!1),e._node.src=t._src,e._node.preload="auto",e._node.volume=n*a.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++a._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorListener,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(a._canPlayEvent,e._loadFn,!1)}};var d={},c=function(e){var t=e._src;if(d[t])return e._duration=d[t].duration,void p(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),o=new Uint8Array(n.length),r=0;r<n.length;++r)o[r]=n.charCodeAt(r);_(o.buffer,e)}else{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){var t=(i.status+"")[0];if("0"!==t&&"2"!==t&&"3"!==t)return void e._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".");_(i.response,e)},i.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete d[t],e.load())},l(i)}},l=function(e){try{e.send()}catch(t){e.onerror()}},_=function(e,t){a.ctx.decodeAudioData(e,function(e){e&&t._sounds.length>0&&(d[t._src]=e,p(t,e))},function(){t._emit("loaderror",null,"Decoding audio data failed.")})},p=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},f=function(){try{"undefined"!=typeof AudioContext?a.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?a.ctx=new webkitAudioContext:a.usingWebAudio=!1}catch(e){a.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(a._navigator&&a._navigator.platform),t=a._navigator&&a._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var o=/safari/.test(a._navigator&&a._navigator.userAgent.toLowerCase());(a._navigator&&a._navigator.standalone&&!o||a._navigator&&!a._navigator.standalone&&!o)&&(a.usingWebAudio=!1)}a.usingWebAudio&&(a.masterGain=void 0===a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),a.masterGain.gain.value=1,a.masterGain.connect(a.ctx.destination)),a._setup()};o=[],void 0!==(r=function(){return{Howler:a,Howl:u}}.apply(t,o))&&(e.exports=r),t.Howler=a,t.Howl=u,"undefined"!=typeof window?(window.HowlerGlobal=i,window.Howler=a,window.Howl=u,window.Sound=s):void 0!==n&&(n.HowlerGlobal=i,n.Howler=a,n.Howl=u,n.Sound=s)}(),/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.0.3
 *  howlerjs.com
 *
 *  (c) 2013-2017, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var o=this;return o.ctx&&o.ctx.listener?(t="number"!=typeof t?o._pos[1]:t,n="number"!=typeof n?o._pos[2]:n,"number"!=typeof e?o._pos:(o._pos=[e,t,n],o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]),o)):o},HowlerGlobal.prototype.orientation=function(e,t,n,o,r,i){var a=this;if(!a.ctx||!a.ctx.listener)return a;var u=a._orientation;return t="number"!=typeof t?u[1]:t,n="number"!=typeof n?u[2]:n,o="number"!=typeof o?u[3]:o,r="number"!=typeof r?u[4]:r,i="number"!=typeof i?u[5]:i,"number"!=typeof e?u:(a._orientation=[e,t,n,o,r,i],a.ctx.listener.setOrientation(e,t,n,o,r,i),a)},Howl.prototype.init=function(e){return function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(t,n)}}),o;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return o._stereo;o._stereo=t,o._pos=[t,0,0]}for(var i=o._getSoundIds(n),a=0;a<i.length;a++){var u=o._soundById(i[a]);if(u){if("number"!=typeof t)return u._stereo;u._stereo=t,u._pos=[t,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",u._panner&&u._panner.pan||e(u,r),"spatial"===r?u._panner.setPosition(t,0,0):u._panner.pan.value=t),o._emit("stereo",u._id)}}return o},Howl.prototype.pos=function(t,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(t,n,o,r)}}),i;if(n="number"!=typeof n?0:n,o="number"!=typeof o?-.5:o,void 0===r){if("number"!=typeof t)return i._pos;i._pos=[t,n,o]}for(var a=i._getSoundIds(r),u=0;u<a.length;u++){var s=i._soundById(a[u]);if(s){if("number"!=typeof t)return s._pos;s._pos=[t,n,o],s._node&&(s._panner&&!s._panner.pan||e(s,"spatial"),s._panner.setPosition(t,n,o)),i._emit("pos",s._id)}}return i},Howl.prototype.orientation=function(t,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(t,n,o,r)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,o="number"!=typeof o?i._orientation[2]:o,void 0===r){if("number"!=typeof t)return i._orientation;i._orientation=[t,n,o]}for(var a=i._getSoundIds(r),u=0;u<a.length;u++){var s=i._soundById(a[u]);if(s){if("number"!=typeof t)return s._orientation;s._orientation=[t,n,o],s._node&&(s._panner||(s._pos||(s._pos=i._pos||[0,0,-.5]),e(s,"spatial")),s._panner.setOrientation(t,n,o)),i._emit("orientation",s._id)}}return i},Howl.prototype.pannerAttr=function(){var t,n,o,r=this,i=arguments;if(!r._webAudio)return r;if(0===i.length)return r._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return o=r._soundById(parseInt(i[0],10)),o?o._pannerAttr:r._pannerAttr;t=i[0],void 0===n&&(r._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:r._distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:r._maxDistance,panningModel:void 0!==t.panningModel?t.panningModel:r._panningModel,refDistance:void 0!==t.refDistance?t.refDistance:r._refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:r._rolloffFactor})}else 2===i.length&&(t=i[0],n=parseInt(i[1],10));for(var a=r._getSoundIds(n),u=0;u<a.length;u++)if(o=r._soundById(a[u])){var s=o._pannerAttr;s={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:s.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:s.maxDistance,panningModel:void 0!==t.panningModel?t.panningModel:s.panningModel,refDistance:void 0!==t.refDistance?t.refDistance:s.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:s.rolloffFactor};var d=o._panner;d?(d.coneInnerAngle=s.coneInnerAngle,d.coneOuterAngle=s.coneOuterAngle,d.coneOuterGain=s.coneOuterGain,d.distanceModel=s.distanceModel,d.maxDistance=s.maxDistance,d.panningModel=s.panningModel,d.refDistance=s.refDistance,d.rolloffFactor=s.rolloffFactor):(o._pos||(o._pos=r._pos||[0,0,-.5]),e(o,"spatial"))}return r},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this)}}(Sound.prototype.reset);var e=function(e,t){t=t||"spatial","spatial"===t?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.value=e._stereo),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id)}}()}).call(t,n(16))},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=n(0),a=new r.Uint64([4294967295,4294967295]),u=new r.Uint64([0,0]),s=function(){function e(){this.position=new i.Vector3}return e}();t.JTreeIterationData=s;var d=function(e){function t(t){var n=e.call(this)||this;return n.material=t,n.mergedGeometry=[],n.mergedMeshes=[],n.spawnMergeCubes=n.spawnMergeCubes.bind(n),n}return o(t,e),t.prototype.generateJTree=function(){this.jtree=new r.JoshuaTree,this.generateJTree_internal(this.jtree,0)},t.prototype.generateJTree_internal=function(e,t){if(!(t>1))for(var n=0;n<64;++n)if(n%2==1){var o=new r.JoshuaTree;e.Add(n,o),this.generateJTree_internal(o,t+1)}},t.prototype.generateJTreeSphere=function(e,t){this.jtree=new r.JoshuaTree,this.generateJTreeSphere_internal(e,t,this.jtree,new i.Vector3(0,0,0),0)},t.prototype.pointWithinSphere=function(e,t,n){var o=(new i.Vector3).copy(n);return o=o.sub(e),o.length()<=t},t.prototype.calculateCorners=function(e,t){var n=[],o=(new i.Vector3).copy(e).add(new i.Vector3(t,t,t)),r=(new i.Vector3).copy(o);r.add(new i.Vector3(t,t,t)),n.push(r);var a=(new i.Vector3).copy(o);a.add(new i.Vector3(-t,t,t)),n.push(a);var u=(new i.Vector3).copy(o);u.add(new i.Vector3(t,-t,t)),n.push(u);var s=(new i.Vector3).copy(o);s.add(new i.Vector3(-t,-t,t)),n.push(s);var d=(new i.Vector3).copy(o);d.add(new i.Vector3(t,t,-t)),n.push(d);var c=(new i.Vector3).copy(o);c.add(new i.Vector3(-t,t,-t)),n.push(c);var l=(new i.Vector3).copy(o);l.add(new i.Vector3(t,-t,-t)),n.push(l);var _=(new i.Vector3).copy(o);return _.add(new i.Vector3(-t,-t,-t)),n.push(_),n},t.prototype.generateJTreeSphere_internal=function(e,t,n,o,u){var s=this,d=this.getScaledExtent(u+1);if(!(u>1))for(var c=this,l=0;l<64;++l)!function(l){var _=(new i.Vector3).copy(o).add(c.indexToScaledRelativePosition(l,u)),p=c.calculateCorners(_,d);(new i.Vector3).copy(_).add(new i.Vector3(d,d,d));var f=!0,h=!0;if(p.forEach(function(n,o,r){s.pointWithinSphere(e,t,n)?h=!1:f=!1}),!h)if(f){var v=new r.JoshuaTree;v.Copy(a),n.Add(l,v)}else{var v=new r.JoshuaTree;n.Add(l,v),c.generateJTreeSphere_internal(e,t,v,_,u+1)}}(l)},t.prototype.getScaledExtent=function(e){var t=2-e;return Math.pow(4,t)/2},t.prototype.indexToRelativePosition=function(e){return new i.Vector3(e%4,Math.floor(e/4)%4,Math.floor(e/16))},t.prototype.indexToScaledRelativePosition=function(e,t){var n=1-t,o=this.indexToRelativePosition(e);return o.x*=Math.pow(4,n),o.y*=Math.pow(4,n),o.z*=Math.pow(4,n),o},t.prototype.leafLoop=function(e,t,n,o){for(var a=0;a<64;++a){var u=new r.Uint64;u.Set(a);var d=this.getScaledExtent(n);if(!t.And(u).Empty()){var c=new s;c.position.copy(o),c.position.add(this.indexToRelativePosition(a)),c.position.add(new i.Vector3(d,d,d)),c.extent=d,c.depth=n,c.nodeParent=t,c.nodeKey=a,e(c)}}},t.prototype.depthLoop=function(e,t,n,o,d){var c=this;if(!(n>1)){if(void 0!==d){var l=!1,_=this.getHeirarchyIndexByNode(t);if(d.map(function(e){l=l||(_&e)===e}),!l)return}var p=this.getScaledExtent(n);if(t.Equals(a)){var f=new s;f.position.copy(o),f.position.add(new i.Vector3(p,p,p)),f.extent=p,f.nodeRef=t,f.nodeParent=t.parent,f.nodeKey=t.key,f.depth=n,e(f)}else t.Equals(u)||(1===n?this.leafLoop(e,t,n+1,o):Object.keys(t.children).forEach(function(a){var u=t.children[a];if(u instanceof r.JoshuaTree){var s=(new i.Vector3).copy(o),d=parseInt(a,10);c.depthLoop(e,u,n+1,s.add(c.indexToScaledRelativePosition(d,n)))}}))}},t.prototype.spawnMergeCubes=function(e){var t=new i.BoxGeometry(2*e.extent,2*e.extent,2*e.extent),n=(new i.Matrix4).makeTranslation(e.position.x,e.position.y,e.position.z),o=this.getHeirarchyIndexByIndexAndParent(e.nodeKey,e.nodeParent,1);void 0===this.mergedGeometry[o]&&(this.mergedGeometry[o]=new i.Geometry),this.mergedGeometry[o].merge(t,n)},t.prototype.spawnCubes=function(){var e=this;this.depthLoop(this.spawnMergeCubes,this.jtree,0,new i.Vector3(0,0,0)),this.mergedGeometry.forEach(function(t,n){e.mergedMeshes[n]=new i.Mesh(t,e.material),e.add(e.mergedMeshes[n])})},t.prototype.calculateCenterOfMass=function(){var e=new i.Vector3(0,0,0),t=0;return this.depthLoop(function(n){var o=2*n.extent,r=o*o*o,a=1*r,u=(new i.Vector3).copy(n.position).multiplyScalar(a);e.add(u),t+=a},this.jtree,0,this.position),e.divideScalar(t),e},t.prototype.getHeirarchyIndexByIndexAndParent=function(e,t,n){void 0===n&&(n=4);for(var o=e<<3,r=t,i=1;i<1&&r&&r.parent;++i){var a=r.key<<3;o>>=1,o&=a}return o},t.prototype.getHeirarchyIndexByNode=function(e,t){void 0===t&&(t=4);for(var n=0,o=0;o<1&&e&&e.parent;++o){var r=e.key<<3;n>>=1,n&=r}return n},t.prototype.detachSubtreeSphere=function(e,t){var n=this,o=[];this.depthLoop(function(r){if((new i.Vector3).copy(r.position).sub(e).length()<=t){var a=r.nodeParent;a.Remove(r.nodeKey);var u=n.getHeirarchyIndexByIndexAndParent(r.nodeKey,a,1);o.includes(u)||o.push(u)}},this.jtree,0,this.position),console.log(o)},t}(i.Object3D);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(11),i=n(13),a=function(){function e(e){this.camera=e,this.camera.position.copy(new o.Vector3(0,3,10)),this.inputSound=new i.default("./sfx/sacktap.wav")}return e.prototype.tick=function(e){r.keys[" "]&&this.inputSound.play()},e}();t.default=a},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),a=function(){return Math.random()-.5},u=function(e){function t(t){var n=e.call(this,t)||this;return n.clock=new i.Clock,n.newTarget(),n.tick(),n}return o(t,e),t.prototype.newTarget=function(){this.lerp=0,this.target=new i.Vector3(a()*this.data.distance,0,a()*this.data.distance)},t.prototype.tick=function(){var e=this.clock.getDelta();this.lerp+=e*this.data.speed,this.position.lerp(this.target,this.lerp),this.lookAt(this.target),this.lerp>=1&&this.newTarget(),requestAnimationFrame(this.tick.bind(this))},t}(r.default);t.default=u},function(e,t){e.exports={default:"idle",size:.06,animation:{idle:{speed:1e3,vox:["characters/player/chr_idle.vox"]},walk:{speed:100,vox:["characters/player/chr_walkcycle-00.vox","characters/player/chr_walkcycle-01.vox","characters/player/chr_walkcycle-02.vox","characters/player/chr_walkcycle-03.vox","characters/player/chr_walkcycle-04.vox","characters/player/chr_walkcycle-05.vox"]}}}},function(e,t){e.exports={default:"idle",size:.05,distance:10,speed:.1,animation:{idle:{speed:100,vox:["characters/b_dinosaur/1.vox","characters/b_dinosaur/2.vox","characters/b_dinosaur/3.vox","characters/b_dinosaur/4.vox","characters/b_dinosaur/5.vox","characters/b_dinosaur/6.vox","characters/b_dinosaur/7.vox","characters/b_dinosaur/8.vox"]}}}},function(e,t){e.exports={default:"idle",size:.08,position:[2,.5,-3],rotation:[0,0,25],animation:{idle:{speed:100,vox:["characters/dinosaur/dino_1.vox","characters/dinosaur/dino_2.vox"]}}}},function(e,t){e.exports={type:"Ranged",default:"idle",size:.2,position:[0,-.2,0],rotation:[0,-90,0],animation:{idle:{time:1e5,vox:["thebonezone.vox"]}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(4),i=n(0),a=n(1),u=n(2),s=n(5),d=n(6),c=n(9),l=n(7),_=new a.default(n(8)),p=new i.Scene;window.scene=p;var f=new i.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),h=new i.WebGLRenderer({antialias:!0});h.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(h.domElement);var v,m=new i.Clock;f.position.z=10,f.position.y=2;var y=(new i.Vector4(0,1,0,1),new i.MeshPhongMaterial({color:10506797})),g=new i.Vector3(4,4,4),w=new o.default(y);w.position.copy(new i.Vector3(-4,0,-40)),w.generateJTreeSphere(g,4),w.spawnCubes();new a.default(d);v=new r.default(f);for(var b=0;b<10;)b++,function(){var e=new s.default(l);e.position.set(2*Math.random(),0,2*Math.random()),p.add(e)}();p.add(_),p.add(new a.default(c)),p.add(w),p.add(new i.DirectionalLight),p.add(new i.AmbientLight);var x=!1,A=(new u.Howl({src:["./sfx/sacktap.wav"],onend:function(){x=!1}}),new u.Howl({src:["./sfx/Flaming Atoms.mp3"]}));A.loop(!0),A.play();var T=function(){requestAnimationFrame(T);var e=m.getDelta();v.tick(e),h.render(p,f)};T()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),document.addEventListener("keyup",function(e){t.keys[e.keyCode]=!1,t.keys[e.key]=!1}),document.addEventListener("keydown",function(e){t.keys[e.keyCode]=!0,t.keys[e.key]=!0}),document.addEventListener("mousemove",function(e){t.mouse.x=e.clientX,t.mouse.y=e.clientY;var n=window.innerWidth,o=window.innerHeight;t.mouse.xp=t.mouse.x/n-.5,t.mouse.yp=t.mouse.y/o-.5}),document.addEventListener("mousedown",function(e){t.mouse.left=!0}),document.addEventListener("mouseup",function(e){t.mouse.left=!1}),t.keys={},t.mouse={x:0,y:0,xp:0,yp:0,left:!1,right:!1}},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=[0,0]),this.data=new Uint32Array(e)}return e.prototype.Copy=function(e){return this.data[0]=e.data[0],this.data[1]=e.data[1],this},e.prototype.Xor=function(t){return new e([this.data[0]^t.data[0],this.data[1]^t.data[1]])},e.prototype.Not=function(){return new e([~this.data[0],~this.data[1]])},e.prototype.Or=function(t){return new e([this.data[0]|t.data[0],this.data[1]|t.data[1]])},e.prototype.And=function(t){return new e([this.data[0]&t.data[0],this.data[1]&t.data[1]])},e.prototype.Unset=function(e){return e>31?(e-=32,this.data[1]&=1<<e):this.data[0]&=1<<e,this},e.prototype.Set=function(e){return e>31?(e-=32,this.data[1]|=1<<e):this.data[0]|=1<<e,this},e.prototype.Empty=function(){return 0===this.data[0]&&0===this.data[1]},e.prototype.Equals=function(e){return e.data[0]===this.data[0]&&e.data[1]===this.data[1]},e}();t.Uint64=r;var i=function(e){function t(){var t=e.call(this)||this;return t.children={},t}return o(t,e),t.prototype.FromJSON=function(e,n){var o=this;return void 0===n&&(n=t),this.parent=e.parent,Object.keys(e.children).forEach(function(t){var r=e.children[t],i=parseInt(t,10);r=r.children?(new n).FromJSON(r):r,o.Add(i,r)}),this},t.prototype.Remove=function(e){if(this.children[e]){var n=this.children[e];return this.Copy(this.Xor((new r).Set(e))),n instanceof t&&(delete n.parent,delete n.key),delete this.children[e],!0}return!1},t.prototype.ToJSON=function(){return JSON.stringify(this)},t.prototype.Add=function(e,n,o){return this.children[e]?!!o&&(this.Remove(e),this.Add(e,n),!0):(this.children[e]=n,n instanceof t&&(n.parent=this,n.key=e),this.Copy(this.Or((new r).Set(e))),!0)},t.prototype.ForEach=function(e,n){var o=this;e(this,n),Object.keys(this.children).forEach(function(n){var r=o.children[n];r instanceof t&&r.ForEach(e,n)})},t}(r);t.JoshuaTree=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=function(){function e(e){var t=this;this.sfx=new o.Howl({src:[e],onend:function(){t.playing=!1,console.log("finished")}}),this.playing=!1}return e.prototype.play=function(){this.playing||(this.playing=!0,this.sfx.play(),console.log("play"))},e.prototype.stop=function(){this.playing&&this.sfx.stop()},e}();t.default=r},function(e,t,n){(function(e){function n(e,t){for(var n=0,o=e.length-1;o>=0;o--){var r=e[o];"."===r?e.splice(o,1):".."===r?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function o(e,t){if(e.filter)return e.filter(t);for(var n=[],o=0;o<e.length;o++)t(e[o],o,e)&&n.push(e[o]);return n}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return r.exec(e).slice(1)};t.resolve=function(){for(var t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,r="/"===a.charAt(0))}return t=n(o(t.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),i="/"===a(e,-1);return e=n(o(e.split("/"),function(e){return!!e}),!r).join("/"),e||r||(e="."),e&&i&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function o(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var r=o(e.split("/")),i=o(n.split("/")),a=Math.min(r.length,i.length),u=a,s=0;s<a;s++)if(r[s]!==i[s]){u=s;break}for(var d=[],s=u;s<r.length;s++)d.push("..");return d=d.concat(i.slice(u)),d.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),n=t[0],o=t[1];return n||o?(o&&(o=o.substr(0,o.length-1)),n+o):"."},t.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return i(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(15))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===o||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){h&&p&&(h=!1,p.length?f=p.concat(f):v=-1,f.length&&u())}function u(){if(!h){var e=r(a);h=!0;for(var t=f.length;t;){for(p=f,f=[];++v<t;)p&&p[v].run();v=-1,t=f.length}p=null,h=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function d(){}var c,l,_=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{l="function"==typeof clearTimeout?clearTimeout:o}catch(e){l=o}}();var p,f=[],h=!1,v=-1;_.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new s(e,t)),1!==f.length||h||r(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=d,_.addListener=d,_.once=d,_.off=d,_.removeListener=d,_.removeAllListeners=d,_.emit=d,_.binding=function(e){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(e){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n}]);
//# sourceMappingURL=bundle.js.map